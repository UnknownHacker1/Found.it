<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Foundit - AI File Assistant</title>
    <link rel="stylesheet" href="styles-chat.css">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo-container">
                    <img src="../logo.png" alt="Foundit Logo" class="app-logo">
                </div>
                <button id="theme-toggle" class="theme-toggle" title="Toggle theme">
                    <span class="theme-icon">‚òÄÔ∏è</span>
                </button>
            </div>

            <div class="sidebar-content">
                <!-- Status Section -->
                <div class="status-section">
                    <div class="status-item">
                        <span id="backend-status" class="status-indicator">
                            <span class="dot offline"></span>
                            Connecting...
                        </span>
                    </div>
                    <div class="status-item">
                        <span id="rag-status" class="status-indicator">
                            <span class="dot offline"></span>
                            AI: Loading...
                        </span>
                    </div>
                    <div class="status-item">
                        <span id="index-status" class="status-text">
                            No files indexed
                        </span>
                    </div>
                </div>

                <!-- File Type Filter -->
                <div class="filter-section">
                    <h3>File Types</h3>
                    <div class="filter-dropdown-wrapper">
                        <button class="filter-dropdown-btn" id="filter-dropdown-btn">
                            <span id="filter-selected-text">All Files</span>
                            <svg class="dropdown-arrow" width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                                <path d="M6 9L1 4h10L6 9z"/>
                            </svg>
                        </button>
                        <div class="filter-dropdown-menu hidden" id="filter-dropdown-menu">
                            <label class="filter-option">
                                <input type="checkbox" value="documents" class="filter-checkbox">
                                <span class="filter-label">Documents</span>
                            </label>
                            <label class="filter-option">
                                <input type="checkbox" value="code" class="filter-checkbox">
                                <span class="filter-label">Code</span>
                            </label>
                            <label class="filter-option">
                                <input type="checkbox" value="spreadsheets" class="filter-checkbox">
                                <span class="filter-label">Spreadsheets</span>
                            </label>
                            <label class="filter-option">
                                <input type="checkbox" value="presentations" class="filter-checkbox">
                                <span class="filter-label">Slides</span>
                            </label>
                            <label class="filter-option">
                                <input type="checkbox" value="text" class="filter-checkbox">
                                <span class="filter-label">Text</span>
                            </label>
                            <div class="filter-actions">
                                <button class="filter-clear-btn" id="filter-clear-btn">Clear All</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Index Controls -->
                <div class="index-section">
                    <h3>Index Files</h3>
                    <button id="select-folder-btn" class="btn btn-secondary btn-sm">
                        Select Folder
                    </button>
                    <button id="quick-index-btn" class="btn btn-secondary btn-sm">
                        Index Desktop
                    </button>
                    <div id="index-progress" class="progress-section hidden">
                        <div class="progress-info">
                            <span id="progress-text" class="small-text">Indexing...</span>
                            <button id="cancel-index-btn" class="btn-cancel-index">Cancel</button>
                        </div>
                        <div class="progress-bar">
                            <div id="progress-fill" class="progress-fill"></div>
                        </div>
                    </div>
                </div>

                <!-- Actions -->
                <div class="actions-section">
                    <button id="clear-conversation-btn" class="btn btn-ghost btn-sm">
                        Clear Chat
                    </button>
                    <button id="clear-index-btn" class="btn btn-ghost btn-sm">
                        Clear Index
                    </button>
                    <button id="settings-btn" class="btn btn-ghost btn-sm">
                        ‚öôÔ∏è Settings
                    </button>
                </div>
            </div>

            <div class="sidebar-footer">
                <!-- User Info Section -->
                <div id="user-info" class="user-info-section"></div>

                <p class="small-text">100% Local & Private</p>
            </div>
        </aside>

        <!-- Main Chat Area -->
        <main class="chat-container">
            <!-- Chat Header -->
            <header class="chat-header">
                <h2>Lost it? Found.it!</h2>
                <p class="subtitle">Find any file on your computer with natural language</p>
            </header>

            <!-- Messages Area -->
            <div id="chat-messages" class="chat-messages">
                <!-- Welcome Message -->
                <div class="message assistant-message">
                    <div class="message-avatar">üîç</div>
                    <div class="message-content">
                        <div class="message-text">
                            <p><strong>Lost it? Found.it!</strong></p>
                            <p>I'll help you find any file on your computer using natural language.</p>
                            <p>Try asking:</p>
                            <ul>
                                <li>"Find my resume"</li>
                                <li>"Show me travel documents"</li>
                                <li>"Where are my Q3 budget files?"</li>
                                <li>"Find Python code related to API"</li>
                            </ul>
                            <p class="small-text">First, index your files using the sidebar (only needed once!).</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Input Area -->
            <div class="chat-input-container">
                <div class="chat-input-wrapper">
                    <textarea
                        id="chat-input"
                        class="chat-input"
                        placeholder="Describe the file you're looking for... (e.g., 'Find my resume')"
                        rows="1"
                    ></textarea>
                    <button id="send-btn" class="send-btn" disabled>
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M2 10l16-8-8 16-2-8-6-2z"/>
                        </svg>
                    </button>
                </div>
                <div class="input-hint">
                    <span class="small-text">Press Enter to send, Shift+Enter for new line</span>
                </div>
            </div>
        </main>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚öôÔ∏è Settings</h2>
                <button id="close-settings" class="close-btn">‚úï</button>
            </div>
            <div class="modal-body">
                <!-- Theme Settings -->
                <div class="setting-group">
                    <h3>Appearance</h3>
                    <div class="setting-item">
                        <label for="theme-mode">Theme Mode</label>
                        <select id="theme-mode" class="setting-select">
                            <option value="dark">Dark</option>
                            <option value="light">Light</option>
                            <option value="auto">Auto (Time-based)</option>
                        </select>
                        <span class="setting-hint">Auto mode switches to dark after 6 PM</span>
                    </div>
                </div>

                <!-- Search Settings -->
                <div class="setting-group">
                    <h3>Search</h3>
                    <div class="setting-item">
                        <label for="max-results">Maximum Results</label>
                        <select id="max-results" class="setting-select">
                            <option value="3">3 files</option>
                            <option value="5" selected>5 files</option>
                            <option value="10">10 files</option>
                            <option value="20">20 files</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="show-file-previews" checked>
                            Show file previews in results
                        </label>
                    </div>
                </div>

                <!-- Performance Settings -->
                <div class="setting-group">
                    <h3>Performance</h3>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="auto-index" checked>
                            Auto-index Desktop on startup
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="enable-animations" checked>
                            Enable animations
                        </label>
                    </div>
                </div>

                <!-- Privacy Settings -->
                <div class="setting-group">
                    <h3>Privacy</h3>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="clear-on-exit">
                            Clear chat history on exit
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="save-settings" class="btn btn-primary">Save Settings</button>
                <button id="cancel-settings" class="btn btn-ghost">Cancel</button>
            </div>
        </div>
    </div>

    <script src="renderer-chat.js"></script>
</body>
</html>
